@using System.Globalization
@using System.Web.Mvc.Html
@using AnimalStore.Web.ViewModels
@model AnimalStore.Model.PageableResults<AnimalStore.Model.Dog>

@if (Model.TotalPages > 1)
{
    int selectedBreed;
    bool isNationalSearch;

    if (Request[QuerystringKeys.SelectedBreed] != null)
    {
        selectedBreed = int.Parse(Request.QueryString[QuerystringKeys.SelectedBreed]);
        Session[SessionStoreKeys.SelectedBreed] = selectedBreed;
    }
    else
    {
        selectedBreed = int.Parse(Session[SessionStoreKeys.SelectedBreed].ToString());
    }

    if (Request[QuerystringKeys.IsNationalSearch] != null)
    {
        isNationalSearch = bool.Parse(Request.QueryString[QuerystringKeys.IsNationalSearch]);
        Session[SessionStoreKeys.IsNationalSearch] = isNationalSearch;
    }
    else
    {
        isNationalSearch = bool.Parse(Session[SessionStoreKeys.IsNationalSearch].ToString());
    }

    for (var i = 1; i < Model.TotalPages + 1; i++)
    {
         @Html.ActionLink(i.ToString(CultureInfo.InvariantCulture), actionName: "Dogs", controllerName: "Search", routeValues: new SearchViewModel
         {
                SelectedBreed = selectedBreed,
                IsNationalSearch = isNationalSearch,
                PageNumber = i
         }, htmlAttributes: null)
    }
}